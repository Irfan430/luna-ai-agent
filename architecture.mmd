graph TD
    subgraph User Input
        A[User Goal via GUI/CLI/Voice] --> B{LLM Router};
    end

    B -->|Conversation| C[Direct Response];
    B -->|Action/Plan| D[Cognitive Loop];

    subgraph Cognitive Loop
        D --> E{1. Analyze & Plan};
        E --> F{2. Execute Action};
        F --> G{3. Reflect & Update};
        G --> D;
    end

    F --> H[Execution Kernel];
    D --> I[Memory System];
    I --> D;

    subgraph OS & Services
        H --> J[File System];
        H --> K[Shell Commands];
        H --> L[GUI Automation];
        H --> M[Process Control];
    end

    subgraph Voice Engine
        V1[Wake Word Detection] --> A;
        C --> V2[TTS Output];
    end

    style B fill:#2d2d2d,stroke:#007acc,stroke-width:2px
    style D fill:#2d2d2d,stroke:#4ec9b0,stroke-width:2px
    style H fill:#2d2d2d,stroke:#ce9178,stroke-width:2px
    
